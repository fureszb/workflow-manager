Most mÃ¡r Ã¡tlÃ¡tom a projektet. Ãme a **teljes, lÃ©pÃ©srÅ‘l-lÃ©pÃ©sre ÃºtmutatÃ³** kezdÅ‘knek:

---

# ðŸš€ Projekt IndÃ­tÃ¡si ÃštmutatÃ³ (Ubuntu 24 LTS)

## ðŸ“‹ Mi ez a projekt?
Ez egy **Workflow Manager** alkalmazÃ¡s, ami tartalmaz:
- **Frontend** = A webes felÃ¼let (amit a bÃ¶ngÃ©szÅ‘ben lÃ¡tsz) - React + Vite
- **Backend** = A "motorja" az alkalmazÃ¡snak - Python FastAPI
- **MySQL** = Az adatbÃ¡zis, ahol az adatok tÃ¡rolÃ³dnak

---

## ðŸ”§ 1. LÃ‰PÃ‰S: SzÃ¼ksÃ©ges programok telepÃ­tÃ©se

Nyiss egy terminÃ¡lt (Ctrl+Alt+T) Ã©s mÃ¡sold be ezeket **egymÃ¡s utÃ¡n**:

### 1.1 Rendszer frissÃ­tÃ©se
```bash
sudo apt update && sudo apt upgrade -y
```

### 1.2 Node.js telepÃ­tÃ©se (a frontendhez kell)
```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs
```

EllenÅ‘rizd, hogy sikerÃ¼lt:
```bash
node --version
npm --version
```
(MindkettÅ‘nek ki kell Ã­rnia egy verziÃ³szÃ¡mot)

### 1.3 Python telepÃ­tÃ©se (a backendhez kell)
```bash
sudo apt install -y python3 python3-pip python3-venv
```

EllenÅ‘rizd:
```bash
python3 --version
```

### 1.4 MySQL telepÃ­tÃ©se (adatbÃ¡zis)
```bash
sudo apt install -y mysql-server
```

MySQL elindÃ­tÃ¡sa:
```bash
sudo systemctl start mysql
sudo systemctl enable mysql
```

---

## ðŸ—„ï¸ 2. LÃ‰PÃ‰S: MySQL adatbÃ¡zis beÃ¡llÃ­tÃ¡sa

### 2.1 BelÃ©pÃ©s MySQL-be (adminkÃ©nt)
```bash
sudo mysql
```

### 2.2 AdatbÃ¡zis Ã©s felhasznÃ¡lÃ³ lÃ©trehozÃ¡sa
A MySQL promptban (ahol `mysql>` lÃ¡tod) mÃ¡sold be ezt **egyben**:

```sql
CREATE DATABASE workflow_manager CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'testuser'@'localhost' IDENTIFIED BY '1122';
GRANT ALL PRIVILEGES ON workflow_manager.* TO 'testuser'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

Ez lÃ©trehozza:
- `workflow_manager` nevÅ± adatbÃ¡zist
- `testuser` nevÅ± felhasznÃ¡lÃ³t `1122` jelszÃ³val

---

## ðŸ“ 3. LÃ‰PÃ‰S: Menj a projekt mappÃ¡jÃ¡ba

```bash
cd /a/projekt/mappÃ¡jÃ¡nak/elÃ©rÃ©si/Ãºtja
```

(CserÃ©ld ki arra az Ãºtvonalra, ahol a projekt van!)

---

## ðŸ 4. LÃ‰PÃ‰S: Backend beÃ¡llÃ­tÃ¡sa Ã©s indÃ­tÃ¡sa

### 4.1 LÃ©pj be a backend mappÃ¡ba
```bash
cd backend
```

### 4.2 Python virtuÃ¡lis kÃ¶rnyezet lÃ©trehozÃ¡sa
```bash
python3 -m venv venv
```

### 4.3 VirtuÃ¡lis kÃ¶rnyezet aktivÃ¡lÃ¡sa
```bash
source venv/bin/activate
```
(Most a terminÃ¡l elejÃ©n megjelenik: `(venv)`)

### 4.4 Python csomagok telepÃ­tÃ©se
```bash
pip install -r requirements.txt
pip install pydantic-settings
```

### 4.5 AdatbÃ¡zis tÃ¡blÃ¡k lÃ©trehozÃ¡sa (migrÃ¡ciÃ³k)
```bash
alembic upgrade head
```

### 4.6 (OpcionÃ¡lis) Teszt adatok betÃ¶ltÃ©se
```bash
python seed_data.py
```

### 4.7 Backend indÃ­tÃ¡sa
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

âœ… **Ha minden jÃ³l ment**, ezt fogod lÃ¡tni:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

**âš ï¸ NE ZÃRD BE ezt a terminÃ¡lt! Hagyd futni!**

---

## ðŸŒ 5. LÃ‰PÃ‰S: Frontend beÃ¡llÃ­tÃ¡sa Ã©s indÃ­tÃ¡sa

### 5.1 Nyiss egy ÃšJ terminÃ¡lt (Ctrl+Alt+T)

### 5.2 Menj a projekt frontend mappÃ¡jÃ¡ba
```bash
cd /a/projekt/mappÃ¡jÃ¡nak/elÃ©rÃ©si/Ãºtja/frontend
```

### 5.3 Node csomagok telepÃ­tÃ©se
```bash
npm install
```
(Ez pÃ¡r percig eltarthat)

### 5.4 Frontend indÃ­tÃ¡sa
```bash
npm run dev
```

âœ… **Ha minden jÃ³l ment**, ezt lÃ¡tod:
```
  VITE v7.x.x  ready in xxx ms

  âžœ  Local:   http://localhost:5173/
```

---

## ðŸŽ‰ 6. LÃ‰PÃ‰S: AlkalmazÃ¡s megnyitÃ¡sa

Nyisd meg a bÃ¶ngÃ©szÅ‘t Ã©s Ã­rd be:
```
http://localhost:5173
```

**ðŸŽŠ KÃ©sz! Az alkalmazÃ¡snak mÅ±kÃ¶dnie kell!**

---

## ðŸ“Š Ã–sszefoglalÃ³ - Mit futtatsz?

| TerminÃ¡l | Mi fut benne? | Parancs |
|----------|--------------|---------|
| 1. terminÃ¡l | Backend (Python) | `uvicorn app.main:app --reload` |
| 2. terminÃ¡l | Frontend (React) | `npm run dev` |
| HÃ¡ttÃ©rben | MySQL adatbÃ¡zis | automatikusan fut |

---

## ðŸ†˜ Gyakori hibÃ¡k Ã©s megoldÃ¡suk

### âŒ "Connection refused" hiba
â†’ EllenÅ‘rizd, hogy fut-e a MySQL:
```bash
sudo systemctl status mysql
```

### âŒ "Access denied for user 'testuser'"
â†’ A MySQL felhasznÃ¡lÃ³ nincs jÃ³l beÃ¡llÃ­tva. IsmÃ©teld meg a 2. lÃ©pÃ©st.

### âŒ "Module not found" hiba a backendnÃ©l
â†’ AktivÃ¡ltad a virtuÃ¡lis kÃ¶rnyezetet?
```bash
source venv/bin/activate
```

### âŒ "npm: command not found"
â†’ Node.js nincs telepÃ­tve. IsmÃ©teld meg az 1.2 lÃ©pÃ©st.

---

## ðŸ”„ LegkÃ¶zelebb hogyan indÃ­tsd?

Ha mÃ¡r egyszer mindent beÃ¡llÃ­tottÃ¡l, legkÃ¶zelebb csak ennyi kell:

**1. terminÃ¡l (Backend):**
```bash
cd /projekt/backend
source venv/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**2. terminÃ¡l (Frontend):**
```bash
cd /projekt/frontend
npm run dev
```

---

Van mÃ©g kÃ©rdÃ©sed? SzÃ­vesen segÃ­tek! ðŸ˜Š


A javÃ­tÃ¡sok megvannak. Most kÃ©szÃ­tek egy teljes, **frissÃ­tett indÃ­tÃ¡si ÃºtmutatÃ³t**:

---

# ðŸš€ FRISSÃTETT Projekt IndÃ­tÃ¡si ÃštmutatÃ³ (Ubuntu 24 LTS)

## ðŸ“‹ Amit javÃ­tottam a kÃ³dban:
1. âœ… **WebSocket kapcsolat** - Most mÃ¡r a Vite proxy-n keresztÃ¼l megy (nem kÃ¶zvetlenÃ¼l a 8000-es portra)
2. âœ… **API endpoint hiba** - `/v1/processes/types` â†’ `/v1/processes` (ez volt a 422-es hiba oka)

---

## ðŸ”§ 1. LÃ‰PÃ‰S: SzÃ¼ksÃ©ges programok telepÃ­tÃ©se

```bash
# Rendszer frissÃ­tÃ©se
sudo apt update && sudo apt upgrade -y

# Node.js 20 telepÃ­tÃ©se
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs

# Python telepÃ­tÃ©se
sudo apt install -y python3 python3-pip python3-venv

# MySQL telepÃ­tÃ©se
sudo apt install -y mysql-server

# MySQL indÃ­tÃ¡sa
sudo systemctl start mysql
sudo systemctl enable mysql
```

---

## ðŸ—„ï¸ 2. LÃ‰PÃ‰S: MySQL adatbÃ¡zis beÃ¡llÃ­tÃ¡sa

```bash
# BelÃ©pÃ©s MySQL-be
sudo mysql
```

**A MySQL promptban Ã­rd be:**
```sql
CREATE DATABASE workflow_manager CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'testuser'@'localhost' IDENTIFIED BY '1122';
GRANT ALL PRIVILEGES ON workflow_manager.* TO 'testuser'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

---

## ðŸ 3. LÃ‰PÃ‰S: Backend indÃ­tÃ¡sa (1. TERMINÃL)

```bash
# Menj a projekt mappÃ¡jÃ¡ba (CSERÃ‰LD KI A SAJÃT ÃšTVONALRA!)
cd /home/bencelinux/workflow-manager

# Menj a backend mappÃ¡ba
cd backend

# VirtuÃ¡lis kÃ¶rnyezet lÃ©trehozÃ¡sa (csak elÅ‘szÃ¶r!)
python3 -m venv venv

# VirtuÃ¡lis kÃ¶rnyezet aktivÃ¡lÃ¡sa
source venv/bin/activate

# Csomagok telepÃ­tÃ©se (csak elÅ‘szÃ¶r vagy ha vÃ¡ltozott!)
pip install -r requirements.txt
pip install pydantic-settings

# AdatbÃ¡zis tÃ¡blÃ¡k lÃ©trehozÃ¡sa
alembic upgrade head

# Teszt adatok betÃ¶ltÃ©se (csak elÅ‘szÃ¶r!)
python seed_data.py

# Backend indÃ­tÃ¡sa
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**âœ… Ha sikeres, ezt lÃ¡tod:**
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

**âš ï¸ HAGYD FUTNI! Ne zÃ¡rd be ezt a terminÃ¡lt!**

---

## ðŸŒ 4. LÃ‰PÃ‰S: Frontend indÃ­tÃ¡sa (2. TERMINÃL)

Nyiss egy **ÃšJ** terminÃ¡lt (Ctrl+Alt+T)!

```bash
# Menj a projekt frontend mappÃ¡jÃ¡ba
cd /home/bencelinux/workflow-manager/frontend

# Node csomagok telepÃ­tÃ©se (csak elÅ‘szÃ¶r!)
npm install

# Frontend indÃ­tÃ¡sa
npm run dev
```

**âœ… Ha sikeres, ezt lÃ¡tod:**
```
  VITE v7.x.x  ready in xxx ms

  âžœ  Local:   http://localhost:5173/
```

---

## ðŸŽ‰ 5. LÃ‰PÃ‰S: MegnyitÃ¡s bÃ¶ngÃ©szÅ‘ben

Nyisd meg a **Firefox**-ban:
```
http://localhost:5173
```

---

## ðŸ“Š Ã–sszefoglalÃ³ - Mi hol fut?

| SzolgÃ¡ltatÃ¡s | Port | URL | TerminÃ¡l |
|-------------|------|-----|----------|
| Frontend (Vite) | 5173 | http://localhost:5173 | 2. terminÃ¡l |
| Backend (FastAPI) | 8000 | http://localhost:8000 | 1. terminÃ¡l |
| WebSocket | 8000 â†’ proxyzva | ws://localhost:5173/ws | automatikus |
| MySQL | 3306 | localhost | hÃ¡ttÃ©rben |

---

## ðŸ”„ KÃ–VETKEZÅ INDÃTÃS (ha mÃ¡r egyszer beÃ¡llÃ­tottad)

### 1. terminÃ¡l (Backend):
```bash
cd /home/bencelinux/workflow-manager/backend
source venv/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. terminÃ¡l (Frontend):
```bash
cd /home/bencelinux/workflow-manager/frontend
npm run dev
```

---

## ðŸ†˜ HIBÃK Ã‰S MEGOLDÃSOK

### âŒ Ha mÃ©g mindig vannak WebSocket hibÃ¡k
A javÃ­tÃ¡sok utÃ¡n **Ãºjra kell indÃ­tani a frontend szervert**:
1. A frontend terminÃ¡lban nyomd meg: `Ctrl+C`
2. IndÃ­tsd Ãºjra: `npm run dev`
3. FrissÃ­tsd a bÃ¶ngÃ©szÅ‘t: `Ctrl+F5`

### âŒ "Error generating ideas: 500"
Ez az AI szolgÃ¡ltatÃ¡s hibÃ¡ja. OpciÃ³k:
1. **Ollama telepÃ­tÃ©se** (helyi AI):
   ```bash
   curl -fsSL https://ollama.com/install.sh | sh
   ollama pull ajindal/llama3.1-storm:8b-q4_k_m
   ```
2. **Vagy:** HasznÃ¡ld az OpenRouter-t (felhÅ‘ AI) - Ã¡llÃ­tsd be az API kulcsot a BeÃ¡llÃ­tÃ¡sok oldalon

### âŒ "Connection refused" MySQL hiba
```bash
sudo systemctl start mysql
sudo systemctl status mysql
```

### âŒ "alembic: command not found"
```bash
source venv/bin/activate  # Biztos aktivÃ¡ltad a venv-et?
pip install alembic
```

---

IndÃ­tsd Ãºjra mindkÃ©t terminÃ¡lt a javÃ­tÃ¡sok utÃ¡n, Ã©s a WebSocket + API hibÃ¡knak el kell tÅ±nniÃ¼k! ðŸŽ‰







Conversation Summary - Workflow Manager Project
1. Conversation Overview
This conversation focused on developing and debugging a Workflow Manager application - a full-stack web application for managing monthly business processes, tasks, emails, documents, and AI-assisted features. The discussion progressed through several phases:

Initial setup and troubleshooting of the development environment
Fixing WebSocket connection issues and API endpoint errors
Adding custom process type management to Settings
Implementing a subtasks/checklist system for process instances with status tracking
The project is designed to help manage recurring monthly business tasks (like "Invoicing", "HR processes", etc.) with the ability to break them down into subtasks with individual status tracking.

2. Active Development
Most Recent Implementation: Subtasks System
A two-level subtask system was implemented:

ProcessTypeSubtask (Templates) - Subtask templates defined at the process type level in Settings
ProcessInstanceSubtask (Instances) - Actual subtasks created for each monthly task, with individual status tracking
Key Features Implemented:

CRUD operations for subtask templates (in Settings â†’ Processes)
CRUD operations for instance subtasks (in TaskDetail page)
Drag & drop reordering for both templates and instances
"Generate from template" functionality to auto-create subtasks from templates
Progress bar showing completion percentage
Status dropdown for each subtask using existing status definitions
Technical Approach:
Backend: FastAPI router with specific route ordering (static routes before dynamic {id} routes)
Frontend: React components with drag & drop using native HTML5 drag events
Database: Two new tables with foreign key relationships
3. Technical Stack
Backend:
Python 3.12 with FastAPI framework
SQLAlchemy ORM with MySQL database
Alembic for database migrations
Pydantic for schema validation
uvicorn as ASGI server
APScheduler for scheduled tasks
Frontend:
React 18 with Vite 7
Tailwind CSS v4 (via @tailwindcss/vite plugin)
React Router DOM for routing
Axios for API calls
react-hot-toast for notifications
Lucide React for icons
Database:
MySQL with utf8mb4_unicode_ci collation
User: testuser, Password: 1122, Database: workflow_manager
Development:
Frontend runs on localhost:5173
Backend runs on localhost:8000
WebSocket connects directly to backend in dev mode (ws://localhost:8000/ws)
4. File Operations
Created/Modified Files:
Backend - Models (backend/app/models/models.py):
Python

Apply
# Added two new models:
class ProcessTypeSubtask(Base):
    __tablename__ = "process_type_subtasks"
    # Template subtasks linked to ProcessType

class ProcessInstanceSubtask(Base):
    __tablename__ = "process_instance_subtasks"
    # Instance subtasks linked to ProcessInstance with status_id
Backend - Schemas (backend/app/schemas/schemas.py):
Added schemas for both subtask types:

ProcessTypeSubtaskBase/Create/Update/Response
ProcessInstanceSubtaskBase/Create/Update/Response
ProcessTypeUpdate - extended with name, order, is_active fields
Backend - New Router (backend/app/routers/subtasks.py):
Complete CRUD router with endpoints:

PUT /processes/{id}/subtasks/reorder (MUST be before dynamic routes)
GET/POST /processes/{id}/subtasks
PUT/DELETE /processes/{id}/subtasks/{subtask_id}
PUT /monthly-tasks/{id}/subtasks/reorder
POST /monthly-tasks/{id}/subtasks/generate-from-template
GET/POST /monthly-tasks/{id}/subtasks
PUT/DELETE /monthly-tasks/{id}/subtasks/{subtask_id}
Backend - Main (backend/app/main.py):
Added subtasks router import and registration.

Backend - Migration (backend/alembic/versions/g6b3f9d20e54_add_subtasks.py):
Creates process_type_subtasks and process_instance_subtasks tables.

Backend - Processes Router (backend/app/routers/processes.py):
Extended with full CRUD for process types:

PUT /reorder (moved before /{process_id})
POST / - create new process type
PUT /{id} - update process type
DELETE /{id} - delete/deactivate process type
Backend - Emails Router (backend/app/routers/emails.py):
Fixed route ordering - moved /available-tasks before /{email_id} to prevent 422 errors.

Frontend - New Component (frontend/src/components/SubtaskTemplates.jsx):
Reusable component for managing subtask templates with drag & drop.

Frontend - Settings (frontend/src/pages/Settings.jsx):
Added process type CRUD functionality
Integrated SubtaskTemplates component in expanded process view
Added drag & drop reordering for processes
Frontend - TaskDetail (frontend/src/pages/TaskDetail.jsx):
Added "Alfeladatok" (Subtasks) section with progress bar
Subtask list with status dropdowns
Drag & drop reordering (subtaskDragIdx state)
"SablonbÃ³l" (From template) button
Add new subtask input
Frontend - WebSocket Hook (frontend/src/hooks/useWebSocket.js):
Changed to connect directly to ws://localhost:8000/ws in development mode.

Frontend - Emails Page (frontend/src/pages/Emails.jsx):
Fixed WebSocket URL for development mode.

Frontend - Ideas Page (frontend/src/pages/Ideas.jsx):
Fixed API endpoint: /v1/processes/types â†’ /v1/processes

Frontend - Vite Config (frontend/vite.config.ts):
Removed problematic WebSocket proxy configuration.

5. Solutions & Troubleshooting
Problem 1: WebSocket Connection Failures
Symptom: "Firefox cannot establish connection to ws://localhost:5173/ws" Solution: Changed frontend to connect directly to ws://localhost:8000/ws in dev mode instead of using Vite proxy.

Problem 2: 422 Unprocessable Entity Errors
Symptom: /api/v1/emails/available-tasks returning 422 Cause: FastAPI route ordering - /{email_id} was matching "available-tasks" as an ID Solution: Moved /available-tasks route definition before /{email_id}

Problem 3: 500 Internal Server Error on Ideas Page
Cause: Incorrect API endpoint /v1/processes/types instead of /v1/processes Solution: Fixed endpoint path in Ideas.jsx

Problem 4: "module has no attribute 'router'" Error
Symptom: Backend failed to start with AttributeError Cause: subtasks.py file was empty/not properly saved Solution: Rewrote the file using shell command (cat > file << 'EOF')

Problem 5: Route Ordering in FastAPI
Pattern: Static routes (like /reorder, /generate-from-template) MUST be defined BEFORE dynamic routes (/{id}) Applied to: processes.py, emails.py, subtasks.py

6. Outstanding Work
Completed in This Session:
âœ… Process type CRUD in Settings
âœ… Subtask template management in Settings â†’ Processes
âœ… Subtask management in TaskDetail page
âœ… Drag & drop reordering for subtasks
âœ… Generate subtasks from template functionality
âœ… Progress bar for subtask completion
Potential Future Enhancements:
Subtask descriptions editing inline
Due dates for subtasks
Subtask assignment to users (if multi-user support added)
Automatic status change for parent task when all subtasks complete
Subtask templates with default status assignments
To Run the Application:
Terminal 1 (Backend):

Potentially dangerous command
Bash
Run
cd /home/bencelinux/workflow-manager/backend
source venv/bin/activate
alembic upgrade head  # Run migrations
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
Terminal 2 (Frontend):

Potentially dangerous command
Bash
Run
cd /home/bencelinux/workflow-manager/frontend
npm run dev
Access: http://localhost:5173